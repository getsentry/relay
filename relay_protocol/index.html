<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Types and traits for building JSON-based protocols and schemas"><title>relay_protocol - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="relay_protocol" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../relay_protocol/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../relay_protocol/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt="logo"></a><h2><a href="../relay_protocol/index.html">relay_<wbr>protocol</a><span class="version">25.9.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#test-utilities" title="Test Utilities">Test Utilities</a></li></ul><h3><a href="#reexports">Crate Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li><li><a href="#types" title="Type Aliases">Type Aliases</a></li><li><a href="#derives" title="Derive Macros">Derive Macros</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>relay_protocol</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/relay_protocol/lib.rs.html#1-40">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Types and traits for building JSON-based protocols and schemas</p>
<p>This crate provides the types and aliases that are used for the meta part of the protocol. This
is the core annotation system as well as the dynamic value parts and the metadata that goes with
it.</p>
<h2 id="test-utilities"><a class="doc-anchor" href="#test-utilities">§</a>Test Utilities</h2>
<p>When the <code>test</code> feature is enabled, this crate exposes the additional
<code>assert_annotated_snapshot</code> macro. This can be used with <code>insta</code> to render and compare snapshots
of annotated data with meta data.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.RuleCondition"><code>pub use self::condition::<a class="enum" href="condition/enum.RuleCondition.html" title="enum relay_protocol::condition::RuleCondition">RuleCondition</a>;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="condition/index.html" title="mod relay_protocol::condition">condition</a></dt><dd>Types to specify conditions on data.</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.assert_annotated_snapshot.html" title="macro relay_protocol::assert_annotated_snapshot">assert_<wbr>annotated_<wbr>snapshot</a></dt><dd>Asserts the snapshot of an annotated structure using <code>insta</code>.</dd><dt><a class="macro" href="macro.derive_string_meta_structure.html" title="macro relay_protocol::derive_string_meta_structure">derive_<wbr>string_<wbr>meta_<wbr>structure</a></dt><dd>Derives the <a href="trait.FromValue.html" title="trait relay_protocol::FromValue"><code>FromValue</code></a>, <a href="trait.IntoValue.html" title="trait relay_protocol::IntoValue"><code>IntoValue</code></a>, and <a href="trait.Empty.html" title="trait relay_protocol::Empty"><code>Empty</code></a> traits using the string representation.</dd><dt><a class="macro" href="macro.get_path.html" title="macro relay_protocol::get_path">get_<wbr>path</a></dt><dd>Returns a reference to the typed <a href="struct.Annotated.html" title="struct relay_protocol::Annotated"><code>Annotated</code></a> value at a given path.</dd><dt><a class="macro" href="macro.get_value.html" title="macro relay_protocol::get_value">get_<wbr>value</a></dt><dd>Returns a reference to the typed value at a given path in an <a href="struct.Annotated.html" title="struct relay_protocol::Annotated"><code>Annotated</code></a>.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.Annotated.html" title="struct relay_protocol::Annotated">Annotated</a></dt><dd>Wrapper for data fields with optional meta data.</dd><dt><a class="struct" href="struct.Arr.html" title="struct relay_protocol::Arr">Arr</a></dt><dd>Borrowed version of <a href="type.Array.html" title="type relay_protocol::Array"><code>Array</code></a>.</dd><dt><a class="struct" href="struct.DeserializableAnnotated.html" title="struct relay_protocol::DeserializableAnnotated">Deserializable<wbr>Annotated</a></dt><dd>An utility to de-serialize annotated objects with payload.</dd><dt><a class="struct" href="struct.Error.html" title="struct relay_protocol::Error">Error</a></dt><dd>An error with an enumerable kind and optional data.</dd><dt><a class="struct" href="struct.FiniteF64.html" title="struct relay_protocol::FiniteF64">Finite<wbr>F64</a></dt><dd>A finite 64-bit floating point type.</dd><dt><a class="struct" href="struct.GetterIter.html" title="struct relay_protocol::GetterIter">Getter<wbr>Iter</a></dt><dd>A type-erased iterator over a collection of <a href="trait.Getter.html" title="trait relay_protocol::Getter"><code>Getter</code></a>s.</dd><dt><a class="struct" href="struct.HexId.html" title="struct relay_protocol::HexId">HexId</a></dt><dd>Borrowed version of a “hex ID”, like a span ID, UUID,
&amp;c, represented by a byte slice.</dd><dt><a class="struct" href="struct.Meta.html" title="struct relay_protocol::Meta">Meta</a></dt><dd>Meta information for a data field in the event payload.</dd><dt><a class="struct" href="struct.MetaTree.html" title="struct relay_protocol::MetaTree">Meta<wbr>Tree</a></dt><dd>Represents a tree of meta objects.</dd><dt><a class="struct" href="struct.Obj.html" title="struct relay_protocol::Obj">Obj</a></dt><dd>Borrowed version of <a href="type.Object.html" title="type relay_protocol::Object"><code>Object</code></a>.</dd><dt><a class="struct" href="struct.ParseFiniteFloatError.html" title="struct relay_protocol::ParseFiniteFloatError">Parse<wbr>Finite<wbr>Float<wbr>Error</a></dt><dd>Error type returned when parsing <a href="struct.FiniteF64.html" title="struct relay_protocol::FiniteF64"><code>FiniteF64</code></a> fails.</dd><dt><a class="struct" href="struct.Remark.html" title="struct relay_protocol::Remark">Remark</a></dt><dd>Information on a modified section in a string.</dd><dt><a class="struct" href="struct.SerializableAnnotated.html" title="struct relay_protocol::SerializableAnnotated">Serializable<wbr>Annotated</a></dt><dd>An utility to serialize annotated objects with payload.</dd><dt><a class="struct" href="struct.TryFromFloatError.html" title="struct relay_protocol::TryFromFloatError">TryFrom<wbr>Float<wbr>Error</a></dt><dd>Error type returned when conversion to <a href="struct.FiniteF64.html" title="struct relay_protocol::FiniteF64"><code>FiniteF64</code></a> fails.</dd><dt><a class="struct" href="struct.ValueDescription.html" title="struct relay_protocol::ValueDescription">Value<wbr>Description</a></dt><dd>Helper type that renders out a description of the value.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.ErrorKind.html" title="enum relay_protocol::ErrorKind">Error<wbr>Kind</a></dt><dd>The kind of an <code>Error</code>.</dd><dt><a class="enum" href="enum.RemarkType.html" title="enum relay_protocol::RemarkType">Remark<wbr>Type</a></dt><dd>Gives an indication about the type of remark.</dd><dt><a class="enum" href="enum.SkipSerialization.html" title="enum relay_protocol::SkipSerialization">Skip<wbr>Serialization</a></dt><dd>Defines behavior for skipping the serialization of fields.</dd><dt><a class="enum" href="enum.Val.html" title="enum relay_protocol::Val">Val</a></dt><dd>Borrowed version of <a href="enum.Value.html" title="enum relay_protocol::Value"><code>Value</code></a>.</dd><dt><a class="enum" href="enum.Value.html" title="enum relay_protocol::Value">Value</a></dt><dd>Represents a boxed value.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.Empty.html" title="trait relay_protocol::Empty">Empty</a></dt><dd>A value that can be empty.</dd><dt><a class="trait" href="trait.FromObjectRef.html" title="trait relay_protocol::FromObjectRef">From<wbr>Object<wbr>Ref</a></dt><dd>Implemented for all meta structures which can be created from an object.</dd><dt><a class="trait" href="trait.FromValue.html" title="trait relay_protocol::FromValue">From<wbr>Value</a></dt><dd>Implemented for all meta structures.</dd><dt><a class="trait" href="trait.Getter.html" title="trait relay_protocol::Getter">Getter</a></dt><dd>A type that supports field access by paths.</dd><dt><a class="trait" href="trait.IntoObjectRef.html" title="trait relay_protocol::IntoObjectRef">Into<wbr>Object<wbr>Ref</a></dt><dd>Implemented for all meta structures which can be serialized into an object.</dd><dt><a class="trait" href="trait.IntoValue.html" title="trait relay_protocol::IntoValue">Into<wbr>Value</a></dt><dd>Implemented for all meta structures.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.estimate_size.html" title="fn relay_protocol::estimate_size">estimate_<wbr>size</a></dt><dd>Estimates the size in bytes this would be in JSON.</dd><dt><a class="fn" href="fn.estimate_size_flat.html" title="fn relay_protocol::estimate_size_flat">estimate_<wbr>size_<wbr>flat</a></dt><dd>Estimates the size in bytes this would be in JSON, but does not recurse into objects or arrays.</dd><dt><a class="fn" href="fn.to_value.html" title="fn relay_protocol::to_value">to_<wbr>value</a></dt><dd>Convert <code>T</code> into a <code>Value</code>.</dd></dl><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">§</a></h2><dl class="item-table"><dt><a class="type" href="type.Array.html" title="type relay_protocol::Array">Array</a></dt><dd>Alias for typed arrays.</dd><dt><a class="type" href="type.Map.html" title="type relay_protocol::Map">Map</a></dt><dd>Alias for maps.</dd><dt><a class="type" href="type.MetaMap.html" title="type relay_protocol::MetaMap">MetaMap</a></dt><dd>Meta for children.</dd><dt><a class="type" href="type.Object.html" title="type relay_protocol::Object">Object</a></dt><dd>Alias for typed objects.</dd><dt><a class="type" href="type.Range.html" title="type relay_protocol::Range">Range</a></dt><dd>The start (inclusive) and end (exclusive) indices of a <code>Remark</code>.</dd></dl><h2 id="derives" class="section-header">Derive Macros<a href="#derives" class="anchor">§</a></h2><dl class="item-table"><dt><a class="derive" href="derive.Empty.html" title="derive relay_protocol::Empty">Empty</a></dt><dt><a class="derive" href="derive.FromValue.html" title="derive relay_protocol::FromValue">From<wbr>Value</a></dt><dt><a class="derive" href="derive.IntoValue.html" title="derive relay_protocol::IntoValue">Into<wbr>Value</a></dt></dl><script type="text/json" id="notable-traits-data">{"&<Vec<T, A> as Index<I>>::Output":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>","&mut <Vec<T, A> as Index<I>>::Output":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>","<Vec<T, A> as IntoIterator>::IntoIter":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>","<Vec<T> as IntoDeserializer<'de, E>>::Deserializer":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;</code></h3><pre><code><div class=\"where\">impl&lt;A&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/vec/struct.Vec.html\" title=\"struct alloc::vec::Vec\">Vec</a>&lt;<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.89.0/std/primitive.u8.html\">u8</a>, A&gt;<div class=\"where\">where\n    A: <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/core/alloc/trait.Allocator.html\" title=\"trait core::alloc::Allocator\">Allocator</a>,</div></div>"}</script></section></div></main></body></html>