<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Error reporting and logging facade for Relay."><title>relay_log - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="relay_log" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-32bb7600.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../relay_log/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../relay_log/index.html"><img src="https://raw.githubusercontent.com/getsentry/relay/master/artwork/relay-icon.png" alt="logo"></a><h2><a href="../relay_log/index.html">relay_<wbr>log</a><span class="version">25.7.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#setup" title="Setup">Setup</a></li><li><a href="#logging" title="Logging">Logging</a><ul><li><a href="#conventions" title="Conventions">Conventions</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></li><li><a href="#error-reporting" title="Error Reporting">Error Reporting</a><ul><li><a href="#tags-and-fields" title="Tags and Fields">Tags and Fields</a></li><li><a href="#logging-error-types" title="Logging Error Types">Logging Error Types</a></li><li><a href="#capturing-without-logging" title="Capturing without Logging">Capturing without Logging</a></li></ul></li><li><a href="#testing" title="Testing">Testing</a></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#macros" title="Macros">Macros</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>relay_log</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/relay_log/lib.rs.html#1-132">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Error reporting and logging facade for Relay.</p>
<h2 id="setup"><a class="doc-anchor" href="#setup">§</a>Setup</h2>
<p>To enable logging, invoke the <a href="fn.init.html" title="fn relay_log::init"><code>init</code></a> function with <a href="struct.LogConfig.html" title="struct relay_log::LogConfig"><code>logging</code></a> and
<a href="struct.SentryConfig.html" title="struct relay_log::SentryConfig"><code>sentry</code></a> configuration. The configuration implements <code>serde</code> traits, so it can
be obtained from configuration files.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>relay_log::{LogConfig, SentryConfig};

<span class="kw">let </span>log_config = LogConfig {
    enable_backtraces: <span class="bool-val">true</span>,
    ..LogConfig::default()
};

<span class="kw">let </span>sentry_config = SentryConfig {
    enabled: <span class="bool-val">true</span>,
    ..SentryConfig::default()
};

<span class="kw">unsafe </span>{ relay_log::init(<span class="kw-2">&amp;</span>log_config, <span class="kw-2">&amp;</span>sentry_config); }</code></pre></div>
<h2 id="logging"><a class="doc-anchor" href="#logging">§</a>Logging</h2>
<p>The basic use of the log crate is through the five logging macros: <a href="macro.error.html" title="macro relay_log::error"><code>error!</code></a>, <a href="macro.warn.html" title="macro relay_log::warn"><code>warn!</code></a>,
<a href="macro.info.html" title="macro relay_log::info"><code>info!</code></a>, <a href="macro.debug.html" title="macro relay_log::debug"><code>debug!</code></a> and <a href="macro.trace.html" title="macro relay_log::trace"><code>trace!</code></a> where <code>error!</code> represents the highest-priority log messages
and <code>trace!</code> the lowest. The log messages are filtered by configuring the log level to exclude
messages with a lower priority. Each of these macros accept format strings similarly to
<a href="https://doc.rust-lang.org/1.89.0/std/macro.println.html" title="macro std::println"><code>println!</code></a>.</p>
<h3 id="conventions"><a class="doc-anchor" href="#conventions">§</a>Conventions</h3>
<p>Log messages should start lowercase and end without punctuation. Prefer short and precise log
messages over verbose text. Choose the log level according to these rules:</p>
<ul>
<li><a href="macro.error.html" title="macro relay_log::error"><code>error!</code></a> for bugs and invalid behavior. This will also be reported to Sentry.</li>
<li><a href="macro.warn.html" title="macro relay_log::warn"><code>warn!</code></a> for undesirable behavior.</li>
<li><a href="macro.info.html" title="macro relay_log::info"><code>info!</code></a> for messages relevant to the average user.</li>
<li><a href="macro.debug.html" title="macro relay_log::debug"><code>debug!</code></a> for messages usually relevant to debugging.</li>
<li><a href="macro.trace.html" title="macro relay_log::trace"><code>trace!</code></a> for full auxiliary information.</li>
</ul>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">relay_log::info!</span>(duration = <span class="question-mark">?</span>startup_time, <span class="string">"startup complete"</span>);</code></pre></div>
<h2 id="error-reporting"><a class="doc-anchor" href="#error-reporting">§</a>Error Reporting</h2>
<p><code>sentry</code> is used for error reporting of all messages logged with an ERROR level. To add custom
information, add fields with the <code>tags.</code> prefix.</p>
<h3 id="tags-and-fields"><a class="doc-anchor" href="#tags-and-fields">§</a>Tags and Fields</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">relay_log::error!</span>(
    tags.custom = <span class="string">"value"</span>,            <span class="comment">// will become a tag in Sentry
    </span>field = <span class="string">"value"</span>,                  <span class="comment">// will become a context field
    </span><span class="string">"this message has a custom tag"</span>,
);</code></pre></div>
<h3 id="logging-error-types"><a class="doc-anchor" href="#logging-error-types">§</a>Logging Error Types</h3>
<p>To log <a href="https://doc.rust-lang.org/1.89.0/core/error/trait.Error.html" title="trait core::error::Error">errors</a> to both Sentry and the error stream, use <a href="macro.error.html" title="macro relay_log::error"><code>error!</code></a> and
assign a reference to the error as <code>error</code> field. This formats the error with all its sources,
and ensures the format is suitable for error reporting to Sentry.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::error::Error;
<span class="kw">use </span>std::io;

<span class="kw">let </span>custom_error = io::Error::new(io::ErrorKind::Other, <span class="string">"oh no!"</span>);
<span class="macro">relay_log::error!</span>(error = <span class="kw-2">&amp;</span>custom_error <span class="kw">as </span><span class="kw-2">&amp;</span><span class="kw">dyn </span>Error, <span class="string">"operation failed"</span>);</code></pre></div>
<p>Alternatively, higher level self-explanatory errors can be passed without an additional message.
They are displayed in the same way in log output, but in Sentry they will display with the error
type as primary title.</p>
<h3 id="capturing-without-logging"><a class="doc-anchor" href="#capturing-without-logging">§</a>Capturing without Logging</h3>
<p>Additionally, errors can be captured without logging.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::io::{Error, ErrorKind};

<span class="kw">let </span>custom_error = Error::new(ErrorKind::Other, <span class="string">"oh no!"</span>);
relay_log::capture_error(<span class="kw-2">&amp;</span>custom_error);</code></pre></div>
<h2 id="testing"><a class="doc-anchor" href="#testing">§</a>Testing</h2>
<p>For unit testing, there is a separate initialization macro <a href="macro.init_test.html" title="macro relay_log::init_test"><code>init_test!</code></a> that should be called
at the beginning of test method. It enables test mode of the logger and customizes log levels
for the current crate.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[test]
</span><span class="kw">fn </span>test_something() {
    <span class="macro">relay_log::init_test!</span>();
}</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="protocol/index.html" title="mod relay_log::protocol">protocol</a></dt><dd>The current latest sentry protocol version.</dd><dt><a class="mod" href="sentry/index.html" title="mod relay_log::sentry">sentry</a></dt><dd>This crate provides the core of the <a href="https://sentry.io/">Sentry</a> SDK, which can be used to log
events and errors.</dd></dl><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><dl class="item-table"><dt><a class="macro" href="macro.debug.html" title="macro relay_log::debug">debug</a></dt><dd>Constructs an event at the debug level.</dd><dt><a class="macro" href="macro.error.html" title="macro relay_log::error">error</a></dt><dd>Constructs an event at the error level.</dd><dt><a class="macro" href="macro.info.html" title="macro relay_log::info">info</a></dt><dd>Constructs an event at the info level.</dd><dt><a class="macro" href="macro.init_test.html" title="macro relay_log::init_test">init_<wbr>test</a></dt><dd>Initialize the logger for testing.</dd><dt><a class="macro" href="macro.trace.html" title="macro relay_log::trace">trace</a></dt><dd>Constructs an event at the trace level.</dd><dt><a class="macro" href="macro.warn.html" title="macro relay_log::warn">warn</a></dt><dd>Constructs an event at the warn level.</dd></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.FormatParseError.html" title="struct relay_log::FormatParseError">Format<wbr>Parse<wbr>Error</a></dt><dd>The logging format parse error.</dd><dt><a class="struct" href="struct.Hub.html" title="struct relay_log::Hub">Hub</a></dt><dd>The central object that can manage scopes and clients.</dd><dt><a class="struct" href="struct.Level.html" title="struct relay_log::Level">Level</a></dt><dd>Describes the level of verbosity of a span or event.</dd><dt><a class="struct" href="struct.LevelParseError.html" title="struct relay_log::LevelParseError">Level<wbr>Parse<wbr>Error</a></dt><dd>The logging level parse error.</dd><dt><a class="struct" href="struct.LogConfig.html" title="struct relay_log::LogConfig">LogConfig</a></dt><dd>Controls the logging system.</dd><dt><a class="struct" href="struct.SentryConfig.html" title="struct relay_log::SentryConfig">Sentry<wbr>Config</a></dt><dd>Controls internal reporting to Sentry.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.LogFormat.html" title="enum relay_log::LogFormat">LogFormat</a></dt><dd>Controls the log format.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.backtrace_enabled.html" title="fn relay_log::backtrace_enabled">backtrace_<wbr>enabled</a></dt><dd>Returns <code>true</code> if backtrace printing is enabled.</dd><dt><a class="fn" href="fn.capture_error.html" title="fn relay_log::capture_error">capture_<wbr>error</a></dt><dd>Captures a <code>std::error::Error</code>.</dd><dt><a class="fn" href="fn.configure_scope.html" title="fn relay_log::configure_scope">configure_<wbr>scope</a></dt><dd>Invokes a function that can modify the current scope.</dd><dt><a class="fn" href="fn.ensure_error.html" title="fn relay_log::ensure_error">ensure_<wbr>error</a></dt><dd>Logs an error to the configured logger or <code>stderr</code> if not yet configured.</dd><dt><a class="fn" href="fn.init.html" title="fn relay_log::init">init</a><sup title="unsafe function">⚠</sup></dt><dd>Initialize the logging system and reporting to Sentry.</dd><dt><a class="fn" href="fn.with_scope.html" title="fn relay_log::with_scope">with_<wbr>scope</a></dt><dd>Temporarily pushes a scope for a single call optionally reconfiguring it.</dd></dl><script type="text/json" id="notable-traits-data">{"<Arc<S> as Service<Request>>::Future":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</div><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</div>","<Arc<W> as MakeWriter<'a>>::Writer":"<h3>Notable traits for <code><a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</div><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.89.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for <a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/alloc/sync/struct.Arc.html\" title=\"struct alloc::sync::Arc\">Arc</a>&lt;<a class=\"struct\" href=\"https://doc.rust-lang.org/1.89.0/std/fs/struct.File.html\" title=\"struct std::fs::File\">File</a>&gt;</div>"}</script></section></div></main></body></html>