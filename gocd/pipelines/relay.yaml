# More information on gocd-flavor YAML can be found here:
# - https://github.com/tomzo/gocd-yaml-config-plugin#pipeline
# - https://www.notion.so/sentry/GoCD-New-Service-Quickstart-6d8db7a6964049b3b0e78b8a4b52e25d
format_version: 10
pipelines:
    deploy-relay:
        group: relay
        lock_behavior: unlockWhenFinished
        materials:
            relay_repo:
                git: git@github.com:getsentry/relay.git
                shallow_clone: true
                branch: master
                destination: relay
        stages:
            # For now, this is just a placeholder so we can get deploy refs
            # in GoCD for the purposes of ST deploys.
            - deploy-production:
                  approval:
                      type: manual
                  jobs:
                      deploy:
                          elastic_profile_id: relay
                          tasks:
                              - script: |
                                    true
